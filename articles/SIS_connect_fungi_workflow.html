<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>SIS connect files - fungi workflow • LCr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="SIS connect files - fungi workflow">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">LCr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/Generate-csvs.html">Generate SIS Connect files for multiple plant species</a></li>
    <li><a class="dropdown-item" href="../articles/SIS_connect_fungi_workflow.html">SIS connect files - fungi workflow</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/stevenpbachman/LCr/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>SIS connect files - fungi workflow</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/stevenpbachman/LCr/blob/master/vignettes/SIS_connect_fungi_workflow.Rmd" class="external-link"><code>vignettes/SIS_connect_fungi_workflow.Rmd</code></a></small>
      <div class="d-none name"><code>SIS_connect_fungi_workflow.Rmd</code></div>
    </div>

    
    
<p>The following workflow is specific to fungi and demonstrates how to
generate CSV files with the minimal required information to support a
Least Concern assessment. There are slight differences to the plant
workflow due to there being no fungi equivalent of the native range
dataset from the World Checklist of Vascular Plants.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install LCr and load libraries</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"stevenpbachman/LCr"</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/stevenpbachman/LCr" class="external-link">LCr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span></code></pre></div>
<p>Provide a dataframe with species you believe should be classified as
Least Concern e.g. </p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># dataframe of LC fungi species</span></span>
<span><span class="va">lc_species</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>sp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="st">"Morchella brunnea M.Kuo"</span>, <span class="st">"Trichoderma sinuosum P.Chaverri &amp; Samuels"</span>, <span class="st">"Amanita rhacopus Y.Lamoureux"</span></span>
<span>  <span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">lc_species</span><span class="op">)</span></span>
<span><span class="co">#&gt;                                          sp</span></span>
<span><span class="co">#&gt; 1                   Morchella brunnea M.Kuo</span></span>
<span><span class="co">#&gt; 2 Trichoderma sinuosum P.Chaverri &amp; Samuels</span></span>
<span><span class="co">#&gt; 3              Amanita rhacopus Y.Lamoureux</span></span></code></pre></div>
<p>Run the get_name_keys function. This will check the names against the
GBIF names backbone. Make sure to list <code>kingdon = "fungi"</code>.
The <code>name_column</code> is the column that contains the species to
be assessed. To ensure good name matching, this should be a field that
contains a string with the binomial author(s) combined. To enforce a
single matching name for every name in our list set the
<code>match</code> parameter to ‘single’, or set to ‘multiple’ if you
wish to allow multiple matches.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># get keys</span></span>
<span><span class="va">lc_keys</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu">LCr</span><span class="fu">::</span><span class="fu"><a href="../reference/get_name_keys.html">get_name_keys</a></span><span class="op">(</span></span>
<span>    df <span class="op">=</span> <span class="va">lc_species</span>,</span>
<span>    name_column <span class="op">=</span> <span class="st">"sp"</span>,</span>
<span>    match <span class="op">=</span> <span class="st">"single"</span>,</span>
<span>    kingdom <span class="op">=</span> <span class="st">"fungi"</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p>Run the <code>make_LC_points</code> function. This will generate a
list of two objects: a dataframe with cleaned occurrence data associated
with each species in the supplied list and a citation dataframe that can
be added to the references csv later.</p>
<p>Note that this can take some time as you may be requesting a large
download from GBIF. This step will also generate a GBIF DOI for the
download.</p>
<p>Note that we will use the <code>rGBIF</code> package to obtain the
occurrence data. You will need to set up your GBIF credentials to obtain
the downloads. After you have set up an account at <a href="https://www.gbif.org/" class="external-link">GBIF</a> you need to register your
credentials in the r environment - see this <a href="https://docs.ropensci.org/rgbif/articles/gbif_credentials.html" class="external-link">post</a>
for an explanation.</p>
<p>For fungi, make sure that <code>range_check = FALSE</code> - we will
generate the native ranges for fungi using another method.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># get occs</span></span>
<span><span class="va">lc_sis_occs</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="../reference/make_LC_points.html">make_LC_points</a></span><span class="op">(</span></span>
<span>    keys_df <span class="op">=</span> <span class="va">lc_keys</span>,</span>
<span>    first_name <span class="op">=</span> <span class="st">"Steven"</span>,</span>
<span>    second_name <span class="op">=</span> <span class="st">"Bachman"</span>,</span>
<span>    institution <span class="op">=</span> <span class="st">"Royal Botanic Gardens, Kew"</span>,</span>
<span>    range_check <span class="op">=</span> <span class="cn">FALSE</span> <span class="co"># FALSE for fungi, so that you don't try and check POWO ranges</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p>You may want to save the occurrence file at this stage.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># save the occurrence file</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/write.table.html" class="external-link">write.csv</a></span><span class="op">(</span><span class="va">lc_sis_occs</span><span class="op">$</span><span class="va">points</span>, file <span class="op">=</span> <span class="st">"my_LC_occs.csv"</span><span class="op">)</span></span></code></pre></div>
<p>As we don’t have an equivalent to World Checklist of Vascular
Plantsnative ranges for fungi, we will use our clean occurrence data to
calculate the WGSRPD regions for each species.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># for fungi - get the native ranges</span></span>
<span><span class="va">native_ranges</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_occs_range.html">get_occs_range</a></span><span class="op">(</span><span class="va">lc_sis_occs</span><span class="op">$</span><span class="va">points</span><span class="op">)</span></span></code></pre></div>
<p>We can now generate the SIS Connect csv files</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># get SIS files</span></span>
<span><span class="va">lc_sis_files</span> <span class="op">&lt;-</span> <span class="fu">LCr</span><span class="fu">::</span><span class="fu"><a href="../reference/make_sis_csvs.html">make_sis_csvs</a></span><span class="op">(</span></span>
<span>  unique_id <span class="op">=</span> <span class="va">lc_keys</span><span class="op">$</span><span class="va">GBIF_usageKey</span>,</span>
<span>  first_name <span class="op">=</span> <span class="st">"Steven"</span>,</span>
<span>  second_name <span class="op">=</span> <span class="st">"Bachman"</span>,</span>
<span>  email <span class="op">=</span> <span class="st">"s.bachman@kew.org"</span>,</span>
<span>  institution <span class="op">=</span> <span class="st">"Royal Botanic Gardens, Kew"</span>,</span>
<span>  family <span class="op">=</span> <span class="va">lc_keys</span><span class="op">$</span><span class="va">GBIF_family</span>,</span>
<span>  genus <span class="op">=</span> <span class="va">lc_keys</span><span class="op">$</span><span class="va">GBIF_genus</span>,</span>
<span>  species <span class="op">=</span> <span class="va">lc_keys</span><span class="op">$</span><span class="va">GBIF_species</span>,</span>
<span>  gbif_ref <span class="op">=</span> <span class="va">lc_sis_occs</span><span class="op">$</span><span class="va">citation</span>,</span>
<span>  taxonomicAuthority <span class="op">=</span> <span class="va">lc_keys</span><span class="op">$</span><span class="va">GBIF_authorship</span>,</span>
<span>  kingdom <span class="op">=</span> <span class="st">"fungi"</span>,</span>
<span>  native_ranges <span class="op">=</span> <span class="va">native_ranges</span></span>
<span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>And finally, one more step to combine those files into a ZIP. This
will save the ZIP in your working directory. Just note the ZIP might
hoover up other files e.g. your point occurrence file. You’ll need to
send the point occurrence file to IUCN Red List Unit separately.</p>
<p>You can now upload this ZIP file into SIS Connect <a href="https://connect.iucnredlist.org/" class="external-link uri">https://connect.iucnredlist.org/</a></p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/make_zip.html">make_zip</a></span><span class="op">(</span><span class="va">lc_sis_files</span><span class="op">)</span></span></code></pre></div>
  </main>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Steven Bachman, Matilda Brown.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
